sudo apt-get update
sudo apt-get install -y \
    curl \
    git \
    build-essential \
    nodejs \
    npm \
    rpm \
    golang


curl -fsSL https://deb.nodesource.com/setup_18.x | sudo -E bash -
sudo apt-get install -y nodejs


node -v   # doit être >= 18
npm -v


sudo npm install -g yarn
yarn -v   # doit afficher une version ~1.22.x


sudo apt-get install -y golang
go version


git clone https://github.com/ente-io/ente
cd ente/desktop

yarn install
yarn build


-------


vboxuser@vbox:~$ su -
Password: 
root@vbox:~# ls
ente  vboxpostinstall.sh
root@vbox:~# cd ente
root@vbox:~/ente# ls
architecture	    CONTRIBUTING.md  infra    README.md    server
cli		    desktop	     LICENSE  rust	   SUPPORT.md
CODE_OF_CONDUCT.md  docs	     mobile   SECURITY.md  web
root@vbox:~/ente# cd ..
root@vbox:~# apt-get update
Hit:1 http://security.debian.org/debian-security trixie-security InRelease
Hit:2 http://deb.debian.org/debian trixie InRelease                        
Hit:3 http://deb.debian.org/debian trixie-updates InRelease                
Hit:4 https://deb.nodesource.com/node_20.x nodistro InRelease              
Reading package lists... Done
W: https://deb.nodesource.com/node_20.x/dists/nodistro/InRelease: Policy will reject signature within a year, see --audit for details
root@vbox:~# sudo apt-get install -y \
    curl \
    git \
    build-essential \
    nodejs \
    npm \
    rpm \
    golang
Reading package lists... Done
Building dependency tree... Done
Reading state information... Done
curl is already the newest version (8.14.1-2+deb13u2).
git is already the newest version (1:2.47.3-0+deb13u1).
build-essential is already the newest version (12.12).
nodejs is already the newest version (20.19.5-1nodesource1).
rpm is already the newest version (4.20.1+dfsg-3).
golang is already the newest version (2:1.24~2).
Solving dependencies... Error!
Some packages could not be installed. This may mean that you have
requested an impossible situation or if you are using the unstable
distribution that some required packages have not yet been created
or been moved out of Incoming.
The following information may help to resolve the situation:

The following packages have unmet dependencies:
 nodejs : Conflicts: npm
 npm : Depends: node-agent-base but it is not going to be installed
       Depends: node-archy but it is not going to be installed
       Depends: node-cacache (>= 17) but it is not going to be installed
       Depends: node-chalk (>= 5.1.2-2~) but it is not going to be installed
       Depends: node-cli-table3
       Depends: node-columnify but it is not going to be installed
       Depends: node-cssesc
       Depends: node-debug but it is not going to be installed
       Depends: node-emoji-regex
       Depends: node-gyp but it is not going to be installed
       Depends: node-http-proxy-agent but it is not going to be installed
       Depends: node-https-proxy-agent but it is not going to be installed
       Depends: node-mkdirp but it is not going to be installed
       Depends: node-ms but it is not going to be installed
       Depends: node-nopt but it is not going to be installed
       Depends: node-normalize-package-data but it is not going to be installed
       Depends: node-npm-bundled but it is not going to be installed
       Depends: node-npm-normalize-package-bin
       Depends: node-npm-package-arg (>= 10) but it is not going to be installed
       Depends: node-npmlog but it is not going to be installed
       Depends: node-postcss-selector-parser
       Depends: node-read-package-json but it is not going to be installed
       Depends: node-rimraf but it is not going to be installed
       Depends: node-semver but it is not going to be installed
       Depends: node-string-width but it is not going to be installed
       Depends: node-strip-ansi but it is not going to be installed
       Depends: node-tar but it is not going to be installed
       Depends: node-validate-npm-package-name but it is not going to be installed
       Depends: node-which but it is not going to be installed
       Depends: nodejs:any
       Recommends: node-tap but it is not going to be installed
E: Unable to correct problems, you have held broken packages.
E: The following information from --solver 3.0 may provide additional context:
   Unable to satisfy dependencies. Reached two conflicting decisions:
   1. nodejs:amd64=20.19.2+dfsg-1 is not selected for install
   2. nodejs:amd64=20.19.2+dfsg-1 is selected as a downgrade because:
      1. npm:amd64=9.2.0~ds1-3 is selected for install
      2. npm:amd64 Depends nodejs:any
root@vbox:~# curl -fsSL https://deb.nodesource.com/setup_18.x | sudo -E bash -
2025-11-20 07:06:45 - 
===============================================================================
                            DEPRECATION WARNING                            
===============================================================================
Node.js 18.x is no longer actively supported!
You will not receive security or critical stability updates for this version.

You should migrate to a supported version of Node.js as soon as possible.

Please see https://nodesource.com/products/distributions for details about which
version may be appropriate for you.

The NodeSource Node.js distributions site contains
information both about supported versions of Node.js and N|Solid supported Linux
distributions. To learn more about usage, see:
https://nodesource.com/products/distributions

===============================================================================

Continuing in 10 seconds ...

2025-11-20 07:06:55 - Installing pre-requisites
Hit:1 http://security.debian.org/debian-security trixie-security InRelease
Hit:2 http://deb.debian.org/debian trixie InRelease                        
Hit:3 http://deb.debian.org/debian trixie-updates InRelease                
Hit:4 https://deb.nodesource.com/node_20.x nodistro InRelease              
All packages are up to date.    
Warning: https://deb.nodesource.com/node_20.x/dists/nodistro/InRelease: Policy will reject signature within a year, see --audit for details
apt-transport-https is already the newest version (3.0.3).
ca-certificates is already the newest version (20250419).
curl is already the newest version (8.14.1-2+deb13u2).
gnupg is already the newest version (2.4.7-21).
Summary:
  Upgrading: 0, Installing: 0, Removing: 0, Not Upgrading: 0
Hit:1 http://deb.debian.org/debian trixie InRelease
Hit:2 http://deb.debian.org/debian trixie-updates InRelease                    
Hit:3 http://security.debian.org/debian-security trixie-security InRelease     
Get:4 https://deb.nodesource.com/node_18.x nodistro InRelease [12.1 kB]        
Get:5 https://deb.nodesource.com/node_18.x nodistro/main amd64 Packages [11.6 kB]
Fetched 23.7 kB in 0s (90.3 kB/s)
All packages are up to date.    
Warning: https://deb.nodesource.com/node_18.x/dists/nodistro/InRelease: Policy will reject signature within a year, see --audit for details
2025-11-20 07:07:04 - Repository configured successfully.
2025-11-20 07:07:04 - To install Node.js, run: apt install nodejs -y
2025-11-20 07:07:04 - You can use N|solid Runtime as a node.js alternative
2025-11-20 07:07:04 - To install N|solid Runtime, run: apt install nsolid -y 

root@vbox:~# sudo apt-get install -y nodejs
Reading package lists... Done
Building dependency tree... Done
Reading state information... Done
nodejs is already the newest version (20.19.5-1nodesource1).
0 upgraded, 0 newly installed, 0 to remove and 0 not upgraded.
root@vbox:~# node -v   # doit être >= 18
v20.19.5
root@vbox:~# npm -v
10.8.2
root@vbox:~# sudo npm install -g yarn

added 1 package in 2s
root@vbox:~# yarn -v 
1.22.22
root@vbox:~# sudo apt-get install -y golang
Reading package lists... Done
Building dependency tree... Done
Reading state information... Done
golang is already the newest version (2:1.24~2).
0 upgraded, 0 newly installed, 0 to remove and 0 not upgraded.
root@vbox:~# go version
go version go1.24.4 linux/amd64
root@vbox:~# cd ente/desktop
root@vbox:~/ente/desktop# yarn install
yarn install v1.22.22
warning package-lock.json found. Your project contains lock files generated by tools other than Yarn. It is advised not to mix package managers in order to avoid resolution inconsistencies caused by unsynchronized lock files. To clear this warning, remove package-lock.json.
[1/4] Resolving packages...
[2/4] Fetching packages...
error Command failed.
Exit code: 128
Command: git
Arguments: ls-remote --tags --heads ssh://git@github.com/electron/node-gyp.git
Directory: /root/ente/desktop
Output:
Host key verification failed.
fatal: Could not read from remote repository.

Please make sure you have the correct access rights
and the repository exists.
info Visit https://yarnpkg.com/en/docs/cli/install for documentation about this command.

